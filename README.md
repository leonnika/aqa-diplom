# Тестирование сценария покупки тура через комплексный веб-сервис, взаимодействующего с СУБД и API Банка.
## Документация

1. План автоматизации - [Plan.md](https://github.com/leonnika/aqa-diplom/blob/master/doc/Plan.md)
2. Отчётные документы по итогам тестирования - Report.md (!не готов)
3. Отчётные документы по итогам автоматизации - Summary.md (!не готов)

## Краткое описание работы веб-сервиса
Приложение предлагает купить тур по определённой цене с помощью двух способов:

1. Обычная оплата по дебетовой карте
2. Уникальная технология: выдача кредита по данным банковской карты
Само приложение не обрабатывает данные по картам, а пересылает их банковским сервисам (через симулятор, который написан на Node.js, поэтому для запуска использован Docker):

* сервису платежей (далее - Payment Gate)
* кредитному сервису (далее - Credit Gate)

Симулятор позволяет для заданного набора карт генерировать предопределённые ответы.

Приложение должно в собственной СУБД сохранять информацию о том, каким способом был совершён платёж и успешно ли он был совершён (при этом данные карт сохранять не допускается).

Заявлена поддержка двух СУБД:

* MySQL
* PostgreSQL


## Руководство использования

* Для запуска контейнеров выполните:

```
docker-compose up
```

* Для запуска БД mysql выполните:
 
```
docker-compose exec mysql mysql -u app -p app

```
* Для запуска БД postgresql выполните:
 
```
docker-compose exec postgresql psql -u app -p app

```

* Для запуска приложения выполните:

```
java -jar ./artifacts/aqa-shop.jar

```

* Для запуска тестов c mysql:

```
gradlew test -Dselenide.headless=true -Durlbd=jdbc:mysql://localhost:3306/app -Duser=app -Duser=app -Dpassword=pass--info
```
* Для запуска тестов c psql:

```
gradlew test -Dselenide.headless=true -Durlbd=jdbc:postgresql://localhost:5432/app -Duser=app -Duser=app -Dpassword=pass--info
```


